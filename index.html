<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIX Raebareli</title>
    <style>
        /* Simple, solid styles that won't break */
        body { font-family: Arial, sans-serif; margin: 0; background-color: #f8f9fa; color: #333; }
        .top-bar { background: #0056b3; color: white; padding: 15px; text-align: center; font-size: 20px; font-weight: bold; }
        .container { padding: 15px; }
        .search-input { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
        .card { background: white; border-radius: 10px; padding: 15px; margin-bottom: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .card-info { flex: 1; }
        .shop-name { font-size: 18px; font-weight: bold; margin: 0; color: #0056b3; }
        .shop-detail { font-size: 14px; color: #666; margin: 4px 0; }
        .call-button { background: #28a745; color: white; text-decoration: none; padding: 12px 20px; border-radius: 8px; font-weight: bold; font-size: 14px; }
        #loading { text-align: center; padding: 20px; color: #888; }
    </style>
</head>
<body>

    <div class="top-bar">RIX INDUSTRIAL EXCHANGE</div>

    <div class="container">
        <input type="text" class="search-input" id="search" placeholder="Search shops (e.g. Shiv Machinery)..." onkeyup="filterList()">
        
        <div id="loading">Checking Raebareli Industrial Database...</div>
        <div id="shop-container"></div>
    </div>

    <script>
        // Your specific published CSV link
        const scriptURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSV8re2vW-TnHXqnW6LRXuwcU_NJScWKEj-EL9M0Ou6t3CAuUg4oeILRlfllGtVvm6FThUqBhBfsDs4/pub?output=csv";

        async function fetchShops() {
            try {
                const response = await fetch(scriptURL);
                const data = await response.text();
                const rows = data.split('\n').slice(1); // Skip header row
                
                const container = document.getElementById('shop-container');
                const loading = document.getElementById('loading');
                
                let html = '';
                rows.forEach(row => {
                    const columns = row.split(',');
                    if (columns.length >= 4 && columns[0].trim() !== "") {
                        const name = columns[0].replace(/"/g, "");
                        const cat = columns[1].replace(/"/g, "");
                        const loc = columns[2].replace(/"/g, "");
                        const phone = columns[3].replace(/"/g, "");

                        html += `
                            <div class="card">
                                <div class="card-info">
                                    <p class="shop-name">${name}</p>
                                    <p class="shop-detail"><b>Type:</b> ${cat}</p>
                                    <p class="shop-detail"><b>üìç</b> ${loc}</p>
                                </div>
                                <a href="tel:${phone}" class="call-button">CALL</a>
                            </div>
                        `;
                    }
                });

                loading.style.display = 'none';
                container.innerHTML = html;
            } catch (error) {
                document.getElementById('loading').innerText = "Error loading data. Please check internet.";
            }
        }

        function filterList() {
            const input = document.getElementById('search').value.toLowerCase();
            const cards = document.getElementsByClassName('card');
            for (let i = 0; i < cards.length; i++) {
                const text = cards[i].innerText.toLowerCase();
                cards[i].style.display = text.includes(input) ? "flex" : "none";
            }
        }

        fetchShops();
    </script>
</body>
</html>
