<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RIX | Raebareli Industrial Authority</title>

    <meta name="description" content="India‚Äôs Independent Industrial Business Network">
    <meta name="theme-color" content="#020617">

    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@800&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>

    <style>
        /* SECTION 1: DESIGN SYSTEM */
        :root {
            --bg: #020617;
            --surface: #0f172a;
            --surface-light: #1e293b;
            --border: rgba(255, 255, 255, 0.08);
            --text: #f8fafc;
            --muted: #94a3b8;
            --primary: #3b82f6;
            --primary-glow: rgba(59, 130, 246, 0.3);
            --gold: #fbbf24;
            --green: #10b981;
            --red: #ef4444;
            --glass: rgba(15, 23, 42, 0.8);
            --radius-xl: 32px;
            --radius-m: 16px;
            --shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        /* SECTION 2: GLOBAL ARCHITECTURE */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding-bottom: 140px;
            overflow-x: hidden;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes shimmer { 0% { background-position: -1000px 0; } 100% { background-position: 1000px 0; } }

        /* SECTION 3: HEADER & BRANDING */
        header {
            padding: 100px 24px 120px;
            background: radial-gradient(circle at top right, #1e3a8a, transparent 70%), 
                        linear-gradient(to bottom, #020617, #0f172a);
            text-align: center;
            border-bottom: 1px solid var(--border);
            position: relative;
        }

        header .badge {
            display: inline-block;
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            font-weight: 800;
            font-size: 10px;
            padding: 8px 16px;
            border-radius: 100px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 20px;
        }

        header h1 {
            font-family: 'Bricolage Grotesk', sans-serif;
            font-size: 68px;
            font-weight: 800;
            letter-spacing: -4px;
            line-height: 0.8;
        }

        header p {
            color: var(--muted);
            margin-top: 15px;
            font-weight: 800;
            letter-spacing: 4px;
            font-size: 11px;
            text-transform: uppercase;
        }

        /* SECTION 4: LIVE ANALYTICS */
        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding: 0 20px;
            margin-top: -60px;
            position: relative;
            z-index: 10;
        }

        @media(min-width: 768px) { .stats { grid-template-columns: repeat(4, 1fr); } }

        .stat {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: var(--radius-m);
            padding: 24px 15px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .stat strong {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 32px;
            color: var(--text);
            line-height: 1;
        }

        .stat span {
            font-size: 10px;
            font-weight: 800;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* SECTION 5: CONTROL PANEL */
        .controls { padding: 40px 20px 20px; }
        
        .search-box {
            position: relative;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            display: flex;
            align-items: center;
            padding: 8px;
            transition: 0.3s;
        }

        .search-box:focus-within { border-color: var(--primary); box-shadow: 0 0 0 4px var(--primary-glow); }

        .search-box input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            padding: 15px;
            font-size: 16px;
            font-weight: 600;
        }

        .search-btn {
            width: 50px; height: 50px;
            background: var(--primary);
            border-radius: 15px;
            display: flex; align-items: center; justify-content: center;
        }

        .filters {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            margin-top: 20px;
            padding-bottom: 10px;
            scrollbar-width: none;
        }

        .filters::-webkit-scrollbar { display: none; }

        .chip {
            padding: 12px 24px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 100px;
            font-size: 13px;
            font-weight: 700;
            white-space: nowrap;
            cursor: pointer;
            transition: 0.3s;
            color: var(--muted);
        }

        .chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 10px 20px var(--primary-glow);
        }

        /* SECTION 6: THE DIRECTORY LIST */
        #list { padding: 20px; display: grid; gap: 24px; }
        
        @media(min-width: 900px) { #list { grid-template-columns: repeat(2, 1fr); } }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            padding: 30px;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.6s ease-out backwards;
            transition: 0.4s;
        }

        .card:hover { transform: translateY(-5px); border-color: var(--primary); }

        .card.premium {
            border: 2px solid var(--gold);
            background: linear-gradient(145deg, #1e293b, #020617);
        }

        .card.premium::before {
            content: "DIAMOND PARTNER";
            position: absolute;
            top: 20px; right: -35px;
            background: var(--gold);
            color: #000;
            font-size: 9px;
            font-weight: 900;
            padding: 6px 45px;
            transform: rotate(45deg);
        }

        .title {
            font-size: 26px;
            font-weight: 800;
            color: var(--text);
            letter-spacing: -0.5px;
            margin-bottom: 4px;
            display: flex; align-items: center; gap: 10px;
        }

        .loc { font-size: 14px; color: var(--muted); margin-bottom: 20px; }

        .tags { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 25px; }
        
        .tag {
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            padding: 8px 14px;
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            color: var(--muted);
        }

        .verified { color: var(--green); border-color: var(--green); background: rgba(16, 185, 129, 0.05); }
        .expired { color: var(--red); border-color: var(--red); background: rgba(239, 68, 68, 0.05); }

        .rating-box {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .stars { color: var(--gold); font-weight: 800; font-size: 14px; }
        .reviews { font-size: 11px; font-weight: 800; color: var(--muted); }

        /* SECTION 7: ACTIONS */
        .actions { display: grid; grid-template-columns: 1fr 65px; gap: 12px; }
        
        .call {
            background: var(--primary);
            color: white;
            padding: 18px;
            border-radius: 20px;
            text-align: center;
            font-weight: 800;
            text-decoration: none;
            font-size: 15px;
            transition: 0.3s;
        }

        .call:active { transform: scale(0.95); }

        .wa {
            background: #22c55e;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            text-decoration: none;
        }

        /* SECTION 8: ADMIN DASHBOARD */
        .admin {
            margin-top: 25px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border: 1px dashed var(--border);
            border-radius: 15px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            color: var(--muted);
        }

        .admin span { color: var(--primary); font-weight: 800; }

        .hidden { display: none !important; }

        /* SECTION 9: NAVIGATION DOCK */
        nav {
            position: fixed;
            bottom: 30px; left: 20px; right: 20px;
            background: var(--glass);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border);
            border-radius: 40px;
            padding: 12px 20px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 30px 60px rgba(0,0,0,0.8);
        }

        nav a { font-size: 11px; font-weight: 800; color: var(--muted); text-decoration: none; text-align: center; }
        nav a i { display: block; font-size: 22px; font-style: normal; margin-bottom: 4px; }
        nav a.active { color: var(--primary); }

        nav .add {
            background: var(--primary);
            width: 70px; height: 70px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 35px; color: #fff;
            margin-top: -60px;
            border: 8px solid var(--bg);
            box-shadow: 0 10px 20px var(--primary-glow);
        }

        /* LOADING SKELETON */
        .loader { height: 200px; background: var(--surface); border-radius: var(--radius-xl); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
    </style>
</head>

<body>

    <header>
        <div class="badge">Independent Hub 2026</div>
        <h1>RIX</h1>
        <p>Industrial Business Network</p>
    </header>

    <section class="stats">
        <div class="stat"><strong id="st">0</strong><span>Total Units</span></div>
        <div class="stat"><strong id="sv" style="color:var(--green)">0</strong><span>Verified</span></div>
        <div class="stat"><strong id="sp" style="color:var(--gold)">0</strong><span>Premium</span></div>
        <div class="stat"><strong id="sc">0</strong><span>Hubs/Cities</span></div>
    </section>

    <section class="controls">
        <div class="search-box">
            <input id="searchInput" placeholder="Search factory, tools, city..." onkeyup="searchEngine(this.value)">
            <div class="search-btn">üîç</div>
        </div>
        <div class="filters" id="filters"></div>
    </section>

    <main id="list">
        <div class="loader"></div>
        <div class="loader"></div>
        <div class="loader"></div>
    </main>

    <nav>
        <a href="#" class="active"><i>üè†</i>Directory</a>
        <a class="add" href="https://wa.me/918146518503?text=Add%20Business%20To%20RIX">+</a>
        <a href="https://wa.me/918146518503?text=Support"><i>üõ°Ô∏è</i>Support</a>
    </nav>

    <script>
        /**
         * RIX TITAN CORE ENGINE
         * Architected for Shivansh Maurya.
         * Massive data processing, multi-layer filtering, and UI rendering.
         */

        const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSV8re2vW-TnHXqnW6LRXuwcU_NJScWKEj-EL9M0Ou6t3CAuUg4oeILRlfllGtVvm6FThUqBhBfsDs4/pub?output=csv";
        
        let db = [], view = [], currentCity = "All";

        // 1. DATA ACQUISITION
        Papa.parse(SHEET_URL, {
            download: true,
            header: true,
            complete: results => {
                db = results.data.filter(row => row.ShopID && row["Shop name"]);
                localStorage.setItem("rix_db", JSON.stringify(db));
                boot();
            },
            error: () => {
                db = JSON.parse(localStorage.getItem("rix_db") || "[]");
                boot();
            }
        });

        // 2. BOOT SEQUENCE
        function boot() {
            processExpiry();
            renderStats();
            renderCityChips();
            view = [...db];
            renderDirectory();
        }

        // 3. LOGIC: PREMIUM EXPIRY
        function processExpiry() {
            const now = new Date();
            db.forEach(item => {
                if(item.Premium === "yes" && item.PremiumExpiry) {
                    if(new Date(item.PremiumExpiry) < now) {
                        item.Premium = "expired";
                    }
                }
            });
        }

        // 4. LOGIC: ANALYTICS
        function renderStats() {
            document.getElementById('st').textContent = db.length;
            document.getElementById('sv').textContent = db.filter(x => x.Verified === "yes").length;
            document.getElementById('sp').textContent = db.filter(x => x.Premium === "yes").length;
            document.getElementById('sc').textContent = [...new Set(db.map(x => x.City))].length;
        }

        // 5. LOGIC: FILTER CHIPS
        function renderCityChips() {
            const cities = ["All", ...new Set(db.map(x => x.City))];
            const root = document.getElementById('filters');
            root.innerHTML = cities.map(c => `
                <div class="chip ${c === currentCity ? "active" : ""}" onclick="filterByCity('${c}')">${c}</div>
            `).join("");
        }

        function filterByCity(c) {
            currentCity = c;
            applyAllFilters();
            renderCityChips();
        }

        // 6. LOGIC: MASTER SEARCH & FILTER
        function searchEngine(query) {
            applyAllFilters(query.toLowerCase());
        }

        function applyAllFilters(q = "") {
            view = db.filter(item => {
                const cityMatch = (currentCity === "All" || item.City === currentCity);
                const searchMatch = (
                    item["Shop name"].toLowerCase().includes(q) ||
                    item.Category.toLowerCase().includes(q) ||
                    item.Location.toLowerCase().includes(q) ||
                    item.Industry.toLowerCase().includes(q)
                );
                return cityMatch && searchMatch;
            });
            renderDirectory();
        }

        // 7. UI: DIRECTORY RENDERER
        function renderDirectory() {
            const root = document.getElementById('list');
            
            if(view.length === 0) {
                root.innerHTML = `<div style="text-align:center; padding:100px 0; color:var(--muted)">No businesses found matching your criteria.</div>`;
                return;
            }

            // Priority Sorting (Diamond/Premium First)
            const sorted = view.sort((a,b) => (b.Premium === "yes") - (a.Premium === "yes"));

            root.innerHTML = sorted.map(item => `
                <div class="card ${item.Premium === "yes" ? "premium" : ""}">
                    <div class="title">${item["Shop name"]} ${item.Premium === "yes" ? "üíé" : ""}</div>
                    <div class="loc">üìç ${item.Location}, ${item.City}</div>

                    <div class="tags">
                        <span class="tag">${item.Category}</span>
                        <span class="tag">${item.Industry}</span>
                        ${item.Verified === "yes" ? `<span class="tag verified">Verified ‚úì</span>` : ""}
                        ${item.Premium === "expired" ? `<span class="tag expired">Expiry Detected</span>` : ""}
                    </div>

                    <div class="rating-box">
                        <div class="stars">${generateStars(item.Rating)}</div>
                        <div class="reviews">${item.Reviews || 0} Professional Reviews</div>
                    </div>

                    <div class="actions">
                        <a class="call" href="tel:${item["Phone No."]}">ESTABLISH CALL</a>
                        <a class="wa" href="https://wa.me/91${item["Phone No."]}?text=Inquiry%20via%20RIX">üí¨</a>
                    </div>

                    ${item.AgentID ? `
                        <div class="admin">
                            <div><span>AGENT:</span> ${item.AgentID}</div>
                            <div style="margin-top:5px; display:flex; justify-content:space-between;">
                                <span>PAYMENT: ${item.PaymentStatus || "PENDING"}</span>
                                <span>REVENUE: ‚Çπ${item.AgentCommission || 0}</span>
                            </div>
                        </div>
                    ` : ""}
                </div>
            `).join("");
        }

        function generateStars(n) {
            const r = Math.round(n || 0);
            return "‚òÖ".repeat(r) + "‚òÜ".repeat(5-r);
        }
    </script>

</body>
</html>
